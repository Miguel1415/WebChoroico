name: Deploy to Anaconda Web (cPanel)

on:
  push:
    branches:
      - main  # Se ejecuta cuando haces push a la rama main

jobs:
  FTP-Deploy-Action:
    name: FTP-Deploy-Action
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4.1.0  # Baja tu c√≥digo

    - name: FTP Deploy via LFTP (SSL Disabled)
      run: |
        sudo apt-get update
        sudo apt-get install -y lftp
        lftp -e "set ftp:ssl-allow yes; set ssl:verify-certificate no; set net:timeout 20; set net:max-retries 3; mirror -R --verbose --exclude .git/ --exclude .git* --exclude .env --exclude venv/ --exclude __pycache__/ . /; quit" -u "${{ secrets.FTP_USERNAME }},${{ secrets.FTP_PASSWORD }}" ${{ secrets.FTP_SERVER }}
